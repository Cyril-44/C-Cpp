<h1 align="center">NOIP 2025 模拟赛</h1>

<h5 align="center">厦门一中  Erine</h5>

##### 一、题目概况

|  中文题目名称  |   对数   |  和一未  |    圆形监狱    |  弗洛尔   |
| :------------: | :------: | :------: | :------------: | :-------: |
|    子目录名    |   log    |   ohno   |   panopticon   |   florr   |
|  可执行文件名  |   log    |   ohno   |   panopticon   |   florr   |
|   输入文件名   |  log.in  | ohno.in  | panopticon.in  | florr.in  |
|   输出文件名   | log.out  | ohno.out | panopticon.out | florr.out |
| 每个测试点时限 |   4 s    |   1 s    |      3 s       |    1 s    |
|    内存上限    |   256M   |  1024M   |     1024M      |   128M    |
|  附加样例文件  |    有    |    有    |       有       |    有     |
|  结果比较方式  | 全文比较 | 全文比较 |    全文比较    | 全文比较  |
|    题目类型    |   传统   |   传统   |      传统      |   传统    |

##### 二、提交源程序程序名

| 对于 C++ 语言 | log.cpp | ohno.cpp | panopticon.cpp | florr.cpp |
| :-----------: | :-----: | :------: | :------------: | :-------: |

##### 三、编译选项

| 对于 C++ 语言 | -std=c++14 -O2 |
| :-----------: | :------------: |

##### 四、注意事项

1. C/C++ 中函数 main() 的返回类型必须是 int，程序正常结束时的返回值必须是 0。
2. 保证各个题目的时间限制至少为标程运行时间的两倍。
3. 每道题目需单独建立对应子文件夹。
4. 题目较水，请喧哗的同学不要大声 AK。







<h2 align="center">对数（log）</h2>

#### 题目描述

对于质数 $P=10^{18}+31$，其一个原根是 $g=42$（虽然原根看上去超纲了，但是在这里原根本身是无关紧要的：你只要知道，对于 $1\le i\le P-1$，$g^{i}\bmod P$ 恰好构成了 $1\sim P-1$ 的一个排列。）

定义 $f(x)$ 的值为最小的正整数 $y$ 满足 $g^y\equiv x\pmod P$。显然，$f(x)$ 的定义域与值域均为 $\mathbb N \cap [1,P-1]$。

现有序列 $a$，满足：

- $a_0=527\ 638\ 352\ 645\ 824\ 603$
- $a_{i+1}=f(a_i)$

给定非负整数 $n$，请你求出 $a_n$ 的值。

#### 输入格式

一行一个非负整数 $n$。

#### 输出格式

一行一个正整数 $a_n$。

#### 样例输入 #1

```
999999
```

#### 样例输出 #1

```
739760930443169460
```

#### 样例输入 #2

```
1000000
```

#### 样例输出 #2

```
1145141919810
```

#### 数据范围/提示

对于 $20\%$ 的数据，$n\le 1$；

对于 $100\%$ 的数据，$0\le n\le 10^6$。

**请注意运算过程中所使用的数据类型。你可能会需要 `__int128`。**





<h2 align="center">和一未（ohno）</h2>

#### 题目描述

给定一个长为 $n$，且只包含 $−1,0,1$ 的序列。

你需要将所有为 $0$ 的位置替换成 $-1$ 或 $1$；不过你的能量是有限的，所以你至多将 $k$ 个 $0$ 替换成 $1$。请你求出替换操作后，序列最大子段和的最大值。

#### 输入格式

第一行两个正整数 $n,k$。

第二行 $n$ 个整数 $a_i\in \{-1,0,1\}$。

#### 输出格式

一行一个正整数，表示可能的最大子段和。

#### 样例输入 #1

```
5 2
1 0 -1 0 0
```

#### 样例输出 #1

```
2
```

#### 数据范围/提示

对于 $4\%$ 的数据，$n,k\le 20$；

对于 $10\%$ 的数据，$n,k\le 200$；

对于 $20\%$ 的数据，$n,k\le 5000$；

对于 $50\%$ 的数据，$n,k\le 5\times 10^5$；

对于 $100\%$ 的数据，保证 $1\le n,k\le 10^7$，$a_i\in \{-1,0,1\}$。

**请注意程序的输入输出效率，建议使用更快的 IO 实现方式。**





<h2 align="center">圆形监狱（panopticon）</h2>

#### 题目描述

>  Please don't tell me a lie.

给定一棵 $n$ 个点的无根树 $T$。对于在同样点集上的一棵 $n$ 个点的无根树 $T'$，不妨设有 $x$ 条边同时出现在 $T$ 与 $T'$ 中，则定义 $T'$ 的权值为 $x\times 2^x$。

现在请你对于完全图的所有 $n^{n-2}$ 棵生成树 $T'$ 求出其权值之和，对 $998244353$ 取模。

#### 输入格式

第一行一个整数 $n$ 。

接下来 $n-1$ 行，每行两个整数 $x_i,y_i$ ，描述 $T$ 上的一条边。

#### 输出格式

输出一行，表示价值之和对 $998244353$ 取模的结果。

#### 样例输入 #1

```
4
1 2
2 3
3 4
```

#### 样例输出 #1

```
94
```

#### 样例解释 #1

$x=3$ 的生成树有 $1$ 种，$x=2$ 的生成树有 $7$ 种，$x=1$ 的生成树有 $7$ 种，$x=0$ 的生成树有 $1$ 种。

#### 数据范围/提示

本题共 $25$ 个测试点，每个测试点等分。

| 测试点编号  |        $n$         | 特殊性质 |
| :---------: | :----------------: | :------: |
|    $1,2$    |      $\le 80$      |    无    |
|    $3,4$    |     $\le 300$      |    无    |
|    $5,6$    |     $\le 3000$     |    A     |
|    $7,8$    |     $\le 3000$     |    B     |
|   $9,10$    |     $\le 3000$     |    无    |
|   $11,12$   |     $\le 10^5$     |    A     |
|   $13,14$   |     $\le 10^5$     |    B     |
|   $15,16$   | $\le 2\times 10^6$ |    A     |
|   $17,18$   | $\le 2\times 10^6$ |    B     |
| $19\sim 25$ | $\le 2\times 10^6$ |    无    |

- **特殊性质 A**：图是一条链。
- **特殊性质 B**：图是一张菊花图。

**请注意程序的输入输出效率，建议使用更快的 IO 实现方式。**





<h2 align="center">弗洛尔（florr）</h2>

#### 题目描述

给定 $n$ 种物品，每种物品 $i$ 价值为 $v_i$，个数为 $c_i$。

定义总价值为 $\sum\limits_{i=1}^nc_iv_i$，你可以进行一些（可能为 $0$）次操作来最大化总价值。

一次操作为：选定一个 $i$ 满足 $c_i \geq x_i$，让 $c_i\gets c_i - x_i$，$c_{i+1}\gets c_{i+1}+ 1$。

输出最大的总价值对 $998,\!244,\!353$ 取模。

**注意，你需要最大化总价值，再对 $998,\!244,\!353$ 取模，而不是最大化「总价值对 $998,\!244,\!353$ 取模的值」。**

#### 输入格式

**本题有多组数据。**

第一行一个正整数 $\text{id}$，表示该测试数据所属子任务编号。

第二行一个正整数 $T$，表示数据组数。对于每组数据：

+ 输入共四行。
+ 第一行，一个正整数 $n$，表示钱的种数。
+ 第二行，$n$ 个非负整数分别表示 $v_1, v_2 \dots v_n$。
+ 第三行，$n$ 个非负整数分别表示 $c_1, c_2 \dots c_n$。
+ 第四行，$n - 1$ 个正整数分别表示 $x_1, x_2 \dots x_{n - 1}$。

#### 输出格式

输出 $T$ 行，每行一个整数，表示物品总价值的最大值。所有答案对 $998244353$ 取模。

#### 样例输入 #1

```
0
2
2
1 5
5 1
4
10
1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000
1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000
1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000
```

#### 样例输出 #1

```
11
172998509
```

#### 样例解释 #1

对于样例的第一组数据，$v=[1,5]$，$c=[5,1]$，$x=[4]$。可以选定 $i=1$ 进行一次操作，此时 $c=[1,2]$，总价值为 $1\cdot 1+5\cdot 2=11$，可以证明它是最大的。

#### 数据范围/提示

本题子任务不进行捆绑，共 $7$ 个子任务 $50$ 个测试点，每个测试点等分。

| $\text{id}=$ | $\sum n\le$ | $c_i,v_i\le$ |  特殊性质  | 分值 |
| :----------: | :---------: | :----------: | :--------: | :--: |
|     $1$      |      /      |      /       | 特殊性质 A | $6$  |
|     $2$      |      /      |      /       | 特殊性质 B | $10$ |
|     $3$      |      /      |      /       | 特殊性质 C | $10$ |
|     $4$      |    $300$    |    $300$     |     /      | $14$ |
|     $5$      |   $2000$    |    $2000$    |     /      | $20$ |
|     $6$      |   $2000$    |      /       |     /      | $20$ |
|     $7$      |      /      |      /       |     /      | $20$ |

+ 特殊性质 A：$x_i = 10^9$。
+ 特殊性质 B：$x_i = 1$。
+ 特殊性质 C：所有 $c_i, v_i$ 均在 $[0, 10^5]$ 间均匀随机生成；所有 $x_i$ 均在 $[1, 10^5]$ 间均匀随机生成。

对于所有数据，$1\le t \le 10^5$，$2\le n$，$\sum n\le 2\times 10^5$，$1\le x_i\le 10^9$，$0\le c_i,v_i\le 10^9$。

