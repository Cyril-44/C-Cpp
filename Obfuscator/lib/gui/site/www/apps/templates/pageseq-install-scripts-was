<% use obfui::cmn;     my ($cfgref,$rlist_of_tools,$perlpath) = @_; %>

<% $forge->include('wgt-init-filesysbrowser',$cfgref) %>



<% $forge->include('wgt-optional-start','purpose',__('What is this for?')) %>
    <%$ sprintf(__('Command line versions of the obfuscator (%s) and other useful scripts that come with it can be difficult to find inside directory where %s is installed, and it\'s incovenient to refer to them using full paths.<p>You can install the "aliases" to all these scripts and command line tools into certain directory and then invoke them from that directory. If you install aliases into directory listed in your PATH environment variable, then you will not need to specify any directory part at all when invoking those scripts and command line tools!'),
	$cfgref->{product}{exename},$cfgref->{product}{title}) %>
    <p>
<% $forge->include('wgt-optional-start','path', __('What directories are currently listed in the PATH?')) %>   
<% 
    my $sep =     $^O =~ /Win32/i ? ';' : ':';
    my %h; map { $h{$_} = 1 } split($sep, $ENV{PATH});
    foreach (sort { $a cmp $b } keys %h) {
	print "$_<br>";
    }
%>
<% $forge->include('wgt-optional-end','path') %>

<% $forge->include('wgt-optional-end','purpose') %>
<p>



<form>
<table>
<tr><td>
<%= __("Select directory to install command line tools to:") %>
</td><td>
    <input required class=text type=text name=dir id=dir
        placeholder="put full path or click '..' to browse for it"
        ><script language=javascript>
        <!--
            fsb_add_dir_browser(document.getElementById('dir'),'');
        -->
        </script>
</td>
<% if ($cfgref->{product}->{lang} eq 'perl') { %>
    <tr><td><%= __("Path to Perl executable to use:") %></td>
    <td><input required class=text type=text name=perlpath value="<%= $perlpath%>" id=perlpath></td>
<% } else { %>
    <input type=hidden name=perlpath value="<%= $perlpath%>">
<% } %>
</table>
<p>
<% $forge->include('wgt-submitbtn', __('Install tools')) %>
<input type=hidden name=havevals value=1>
</form>




<% $forge->include('wgt-optional-start','list_of_tools',__('What will be installed')) %>
<%= __("Proxies for the following tools will be installed:") %>
<ul>
<% foreach my $i (@$rlist_of_tools) { %>

    <li>
    <% if ($i->{has_doc} ) { %>
	<a target=_doc href=<%= $i->{docurl} %> >   <%= $i->{destfilename} %>  </a>
    <% } else  { %>
        <%= $i->{destfilename} %> 
    <% } %>


<% } %>
</ul>

<% $forge->include('wgt-optional-end','list_of_tools') %>
<p>




<%$ sprintf( __('Please note: it is <b>greatly adviced to use this GUI</b> (Project Manager) that you are currently using for all operations, <b>instead of calling command line backends directly</b>!')) %>

<%$ sprintf( __('If you need to perform protection of your project from command line, just create a %s for your project using <span class=menuref>Project &rArr; Generate buildscript</span> or <span class=menuref>Project &rArr; Generate buildscript as .bat</span>, and then call the generated script with desired command line arguments to build/rebuild/clean the project or some subset of it.'),
    '<a target=_doc href=/support/doc/obfusui/buildscript.shtml>buildscript</a>')   %>