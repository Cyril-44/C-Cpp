<% use obfui::cmn;  my ($sd,$id,$is_2inputs,$is_input,$cfgref,$non_clickable) = @_;
        %>

            <div class=block-of-code>
	    <div  class="code "
		<% if (!$is_input && !$non_clickable) { %>
		    id=$id
		    onclick='modesample_clicked("<%= $id %>");'     
		    onmouseover="return overlib('Click to select this preset, then click OK at the bottom of the page.');" onmouseout="return nd();"
		<% } %>
	    >
     <% if ($is_2inputs) { %>
	    <div class=code-type-label>Raw code sample</div>
     <%
	}
	my $cmt;
        foreach('','-extr')
        {
            my $is_extr = length($_);
            next if $is_extr && !$is_2inputs;

            my $key = $id . $_;
	    my $code;
            ($cmt,$code) = ($sd->{$key}->{ $is_input ? 'comment_input' : 'comment'},
                    $sd->{$key}->{ $is_input ? 'input' : 'output' });

	    $code = $forge->escape_html($code);
	    $code =~ s,\t,        ,g;
	    $code =~ s, ,&nbsp; ,g;
	    $code =~ s,\r?\n,<br>,g;
	    if ($is_extr) {
	    %>
		<div class=code-separator><hr></div>
		<div class=code-type-label>Code inside markup</div>
         <% }; %>
                <%$ $code %>

            <%
        }
        %>

	<% if (!$is_input && !$non_clickable) { %>
	    <div class=current-mode><i class="checkmark icon"></i>Current mode.</div>
	    <div class=not-current-mode><i class="heart outline icon"></i> Click to select.</div>
	<% } %>

            </div><!--of div.code -->
            <div class=comment><%$ !$is_input ? $cmt : '' %></div>    
    </div>
