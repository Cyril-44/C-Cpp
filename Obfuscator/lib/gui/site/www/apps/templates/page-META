<%
    use obfui::cmn;
    my ($args) = @_;
    use POSIX (qw(&localtime));
%>

<html>
<head><title><%= $args->{title} %></title>
<link rel=stylesheet type=text/css href=/res/res-obfui-cmn.css>
<link rel=stylesheet type=text/css href=/res/$skin/res.css>
<link rel=stylesheet type=text/css href=/res/$skin/res-obfui.css>
<link rel=stylesheet type=text/css href=/res/$skin/res-obfui-samples.css />
<script type="text/javascript" src="/res/obfui.js"></script>
<script type="text/javascript" src="/res/jquery-1.11.3.min.js"></script>
<script type="text/javascript" src="/res/overlib.js"><!-- overLIB (c) Erik Bosrup --></script>

<script src="/res/jslibs/jquery.meow.js" type="text/javascript"></script>
<link href="/res/jslibs/jquery.meow.css" rel="stylesheet" type="text/css" />

<script  language="JavaScript">
<!--
var skin_do_set_footer_in_js = 1; //needed for 'silver' and 'red'
var J = jQuery; //since \$ needs to be escaped, we have to use something without dollar sign
-->
</script>

<script type="text/javascript" src="/res/overlib_shadow.js"><!-- overLIB (c) Erik Bosrup --></SCRIPT>
<script type="text/javascript" src="/res/$skin/skin.js"></SCRIPT>
<script  language="JavaScript">
<!--
if (navigator.appName.indexOf('Netscape')!=-1 || 
    navigator.appName.indexOf('Konqueror')!=-1 )
{
    document.write('<link rel=stylesheet type=text/css href=/res/$skin/mozres.css>');
}
function mygrowl(message_) {
    J.meow({ title: "Status", message: message_, 'container': '.frame-content', 'duration':2000 });
}

function ge_by_id(nm)
{
    return document.getElementById(nm);
}
function setFooterBottom(resetpos)
{
    if (!skin_do_set_footer_in_js) return;
    obj=document.getElementById('footer');
    if (!obj)
	return;
    if (navigator.appName.indexOf('Explorer')!=-1)
	resetpos=0;
    if (resetpos && obj.style['position'] && obj.style.position == 'absolute')
    {
        obj.style.position = 'auto';
        obj.style.top = 0 + 'px';	
    }
    var H;
    {
	var test1 = document.body.scrollHeight;
	var test2 = document.body.offsetHeight
	if (test1 > test2) // all but Explorer Mac
	{
    	    H = document.body.scrollHeight;
	}
	else // Explorer Mac;
    	    //would also work in Explorer 6 Strict, Mozilla and Safari
	{
    	    H = document.body.offsetHeight;
	}
    }
    divoffset = 30;//should be same in CSS too!
    if (obj.offsetTop < H - divoffset){
	pos = H - divoffset;
        obj.style.position = 'absolute';
        obj.style.top = pos + 'px';
    }
}

function setFooterBottom_tbl(resetpos){
    if (!skin_do_set_footer_in_js) return;    
    obj=document.getElementById('bodytbl');
    if (!obj)
	return;
    if (navigator.appName.indexOf('Explorer')!=-1)
	resetpos=0;
    var H;
    {
	var test1 = document.body.scrollHeight;
	var test2 = document.body.offsetHeight
	if (test1 > test2) // all but Explorer Mac
	{
    	    H = document.body.scrollHeight;
	}
	else // Explorer Mac;
    	    //would also work in Explorer 6 Strict, Mozilla and Safari
	{
    	    H = document.body.offsetHeight;
	}
    }
    divoffset = 115;
    if (obj.offsetTop < H - divoffset){
	pos = H - divoffset;
        obj.style.height = pos + 'px';
    }
    if (0) {
    obj=document.getElementById('megatbl');    
    obj.style.width = document.body.scrollWidth;
    };
}



function openwnd(url,name,opts)
{
    if (!window.open(url,name,opts))
    {
	alert("Action not completed since your browser has blocked window " +
		"popup. Please disable popup blocking for this site.");
    };
}

/* used to open directory on win and mac */
function do_opendir(dirtype)
{
    var urlval = 'project.browse.' + dirtype;
    \$.ajax({
      url: urlval,
     context: document.body
    });
}
-->
</script>




<link rel="stylesheet" type="text/css" class="ui" href="/res/other/semantic-ui/2.1.4/semantic.min.css">
<script src="/res/other/semantic-ui/2.1.4/semantic.min.js"></script>
<script src="/res/other/accordion.js"></script>
<script src="/res/other/dropdown.js"></script>

<script language='javascript'>
             J(document).ready(function(){
                J('.ui.accordion').accordion();
                J('.ui.dropdown').dropdown( );
                J('.ui.checkbox').checkbox();

J('.ui.menu .ui.dropdown').dropdown({
  on: 'hover',  delay: {show: 5, hide: 3} /*make it work quickly */
});
J('.ui.menu a.item').on('click', function() {   
  J(this)
    .addClass('active')
    .siblings()
    .removeClass('active'); 
});
             });
</script>

<style type=text/css>
/*uncomment this to have error and success icons have different colors */
/*
.icon.positive { color: green; }
*/
.icon.negative { color: red; }
</style>


</head>
<body marginwidth=0 marginheight=0 topmargin=0 leftmargin=0 id='<%= $args->{content} %>'
onload='setFooterBottom(0);$args->{onloadcode}'
onresize='setFooterBottom(1);'>
<%
 my @localtime_parts = localtime(time());my $year = ($localtime_parts[5]+1900);
 my $footer_content = '&copy; 2002-' . $year . ' Stunnix. All rights reserved.';
 if ($skin ne 'skins/modern') { %>
<table CLASS=megatable id=megatbl><tr><td>
<% if (!$args->{'metapage-is-dedicated-window'}) { %>



<table class=base2>
<tr>
<td class=base2-leftcell></td>
<td class=base2-center>

  <div class=title-cell>
  <span class=logo>
    <span class=pagetitle><%= length($args->{title}) ? "$args->{title} - " : '' %></span>
    <span class=stunnix>Stunnix</span>
    <span class=prodname><%= $args->{product} %></span>
    <span class=resttitle>Project Manager</span> 
  </span>
  </div>

  <div class=winops-cell>
    <%  $forge->include('wgt-wndopts') %>
  </div>

  <div class=block-with-menuitems width=100%>
    <center>
	    <table ><tr><td >
		<%  $forge->include('block-menu') %>
	    </td></table>
    </center>
  </div>


</td> <!-- a cell of submegatable -->
<td class=base2-rightcell></td>
</table>

<% } %>

</td></table> <!-- of megatable -->


<div class=body>
<div class=colored-fields>
<% if (!$args->{'metapage-is-dedicated-window'}) { %>
    <!-- before page content -->
	<%  $forge->include($args->{content},@{$args->{args}}); 
	%>
    <!-- end page content -->
<% } else { %>
<div class=dedicated-body>
<h2><%= (!$args->{'no-h1-title'} ? $args->{title} : '') %></h2>
    <!-- before page content -->
	<%  $forge->include($args->{content},@{$args->{args}}); %>
    <!-- end page content -->
</div>
<% } %>
<p>


</div>
</div>





<div align=center id=footer>
<table class=botnav> 
<tr><td class=page-footer><center><%$ $footer_content %></center></td>
</table></div>

<% } else { 
######################### modern skin goes here!
%>

<!--
<div class=footer-modern>
<%$ $footer_content %>
</div>
-->

<div class=page-title
><%= length($args->{title}) ? "$args->{title} - " : '' %>Stunnix 
<%= $args->{product} %> Project Manager</div>


<div class=wndops><%  $forge->include('wgt-wndopts') %><!-- 
<img src=res/obfui-nav-back.png></img
><img src=res/obfui-nav-fwd.png></img>--></div>


<table class=frame>
<tr class=frame>
<td class="frame frame-ul"></td>
<td class="frame frame-u">



</td><td class="frame frame-ur"></td>
</tr>
<tr class=frame><td valign=bottom class="frame frame-l"><img src=/res/$skin/frame-l.png
    ></img></td><td class="frame frame-content">

    <!-- before page content -->
	<!-- <div id=main-content> -->
	<div class="body ui">
		<div class=colored-fields>
	<%  $forge->include($args->{content},@{$args->{args}}); %>
		</div>
	</div>

    <!-- end page content -->

</td>
<td  valign=bottom  class="frame frame-r"><img src=/res/$skin/frame-r.png></img></td>
</tr>
<tr>
<td class="frame frame-bl"></td>
<td class="frame frame-b"><div class=footer-modern><%$ $footer_content %></div></td>
<td class="frame frame-br"></td>
</tr>
</table>



<div id=menu
><center><table border=0 id=tblmenu><tr id=mainrow><td id=left-menu-piece
></td><td id=center-menu-piece>
<table><tr><%  $forge->include('block-menu') %></table><!--
<a href=/>Project</a>
<a href=/>Settings</a>
<a href=/>Symbols</a>
--></td><td id=right-menu-piece></td></tr></table></center></div>



<% } %>
<% if ($args->{cfg}{product}{webmode}) { #Use google tag manager for tracking when we are running at stunnix.com website
%>
<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-KWDC8X"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KWDC8X');</script>
<!-- End Google Tag Manager -->
<% } %>
</body>

<script language=javascript>
<!--
    setFooterBottom(0);
-->
</script>
</html>
