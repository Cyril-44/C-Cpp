<% 
    my ($opthtml) = @_;
    use obfui::cmn;

%>
<h2><%= __('Command line builder') %></h2>

<form method=post id=mainform>
<input type=hidden name=havevals value=1>
<%$ $$opthtml %>
<p>
<% $forge->include('wgt-submitbtn',__('Submit')) %>
<!-- <% $forge->include('wgt-submitbtn',__('Reset form'),'reset','','reset') %> -->
</form>

<script language=javascript>
\$("#mainform").submit(function(e) {
    var url_ = 'tools.cmdbuilder';
    \$.ajax({
           type: "POST",
           url: url_,
           data: \$(this).serialize(), // serializes the form's elements.
           success: function(data)
           {
		var beginpos = data.indexOf('!-- COMMAND-LINE-BEGIN');
		if (beginpos != -1)
		{
		    data = data.substr(beginpos-1);
		};
		var endpos = data.indexOf('!-- COMMAND-LINE-END');
		if(endpos != -1)
		{
		    data = data.substr(0, endpos - 1);
		}
		\$("#output_wrapper").show();
		\$("#output").html(data);

		
           }
         });
    e.preventDefault(); // avoid to execute the actual submit of the form.
}); 
</script>


<div id=output_wrapper  style="display:none; padding-top: 3em;" >
<h2><%= __('Command line to use:') %></h2>
<div class=consoleoutput id=output>
</div>

</div>

<%$ __('Hint: use <a class=menuref href=tools.installscripts>Tools &rArr; Configure command line tools..</a> to install aliases to obfuscator and other command line tools to any directory. It\'s recommended to install aliases to a directory, listed in your PATH environment variable - this way you won\'t have to specify path to command line tools in your command lines.') %>
