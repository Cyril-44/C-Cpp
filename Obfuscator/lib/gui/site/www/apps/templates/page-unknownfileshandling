<%
    use obfui::cmn;
    my ($all,$curfiles) = @_;
%>
<p/>
<%$ __('If you are frequently adding new files to your project, you do not have to go to <a href=settings.files>Settings&rArr;For Files</a> each time to register them in your project. ') %>
<%$ __('Here you can specify patterns (either space-separated list of file extensions - like "cxx c cpp" or <a href=https://www.boost.org/doc/libs/1_50_0/libs/regex/doc/html/boost_regex/syntax/perl_syntax.html>Perl regular expression</a> that is matched against pathname that is relative to Input Directory) and a mode to use for them. Files residing in Project\'s input directory but not yet listed in the project will be processed using that mode.') %>
<p/>


<% $forge->include('wgt-optional-start','samples',__('Examples of Perl regular expressions')) %>

^/tests/  &nbsp;&nbsp;&nbsp;&nbsp; <%= __('match all files in directory named "tests" (note that all relative paths start with slash).') %><br/>
.*autogenerated  &nbsp;&nbsp;&nbsp;&nbsp;<%= __('match all files that have "autogenerated" in their name (note the dot at the begining of the pattern).') %><br/>

<% $forge->include('wgt-optional-end','samples') %>
<br/>
<p/>
<%$ __('If a file matches several patterns, the last rule that matches "wins".') %>
<p/>
<%$ __('Unsure what mode to select in drop down list? Use the one used for similar type of files <a href=settings.files>here</a>.') %>
<p>
<form method=post>
<input type=hidden name=havevals value=1>
<input type=hidden name=itemcount value=<%$ (0+@$all) %> >
<div class=stretchformfields>
<table>
<%
    foreach my $i (@$all)
    {
	my ($type_html,$pattern_html,$modenm_html) = @$i;
	my $s = "<select ";
	my $r = "$s  style='width: 18em;' ";
	$type_html =~ s/$s/$r/g;
	$r = "$s  style='width: 40em;' ";
	$modenm_html =~ s/$s/$r/g;
	# class=width-of-selec
%>
<tr><td><%$ $type_html %></td><td><input class=text type=text <%$ $pattern_html %> ></td>
<td><%$ $modenm_html %></td>
<%    }
%>
</table>
</div>


<p>

<% $forge->include('wgt-btns-ok-cancel') %>
</form>








<p>
<% $forge->include('wgt-optional-start','filelist',__('Files that were added')) %>

<%= __('Here are files that were added according to settings above. Press OK to update the list.') %>
<div style="white-space:pre; padding:1em; background-color: rgba(128, 128, 128, 0.1);"><%= $curfiles %></div>

<% $forge->include('wgt-optional-end','filelist') %>

